
{% block title %}Liste des sorties au {{ itineraire.titre }} {% endblock title%}

{% block content %}

<div class="row">
    <table class="table table-striped">

        <thead>
            <tr>
                <th>Altitude de départ</th>
                <th>Altitude minimale</th>
                <th>Altitude maximale</th>
                <th>Dénivelé positif cumulé</th>
                <th>Dénivelé negatif cumulé</th>
                <th>Durée estimée</th>
                <th>Difficulté estimée</th>
            </tr>
    
            
            </thead>

            <tbody>
                
                    <tr>
                        <td>{{ itineraire.point_de_depart }}</td>
                        <td>{{itineraire.alt_min}}</td>
                        <td>{{itineraire.alt_max}}</td>
                        <td>{{itineraire.deniv_pos_cumul}}</td>
                        <td>{{itineraire.deniv_neg_cumul}}</td>
                        <td>{{itineraire.deniv_neg_cumul}}</td>
                        <td>{{itineraire.deniv_neg_cumul}}</td>
                        <td>{{itineraire.duree}}</td>
                        <td>{{itineraire.difficulte}}</td>


                    </tr>

                </tbody>    

        <thead>
        <tr>
            <th>Par </th>
            <th>Date</th>
            <th>Details</th>
        </tr>
        
        </thead>
        <tbody>

        {% for sortie in itineraire.sortie_set.all %}
            <tr>
                <td>{{ sortie.utilisateur.username }}</td> 
                <td>{{ sortie.date_sortie}}</td>
                <td><li><a href="/itineraires/{{ itineraire.id }}/{{ sortie.id }}/"> Consulter </a></li></td>

                {% if request.user == sortie.utilisateur %}   
                {# Fait apparaitre le bouton si l'utilisateur connecté est bien celui qui a enregistré la sortie#}
                    <td><li><a href="/itineraires/modif_sortie/{{ sortie.id }}/"> Modifier </a></li></td>
                {% endif  %}
            </tr>
        {% endfor %}

        </tbody>

        <tbody>

        <tr>
            {% if request.user.is_authenticated %}  
                {# Fait apparaitre le bouton Nouvelle Sortie seulement si l'utilisateur est connecté#}
                <td><li><a href="/itineraires/nouvelle_sortie/"> Nouvelle sortie </a></li></td>
            {% endif  %}
        </tr>

        </tbody>

        <tbody>

            {% if request.user.is_authenticated != True %}  
                <td><li><a href="/itineraires/accounts/login/"> Connexion </a></li></td>
            {% endif  %}    

            {% if request.user.is_authenticated %}  
                <td><li><a href="/itineraires/accounts/logout/"> Déconnexion </a></li></td>
            {% endif  %}
        </tbody>

        <tbody>
            <tr>
                {#Bouton de retour #}
                <td><li><a href="/itineraires/"> >>> Retour à la liste des itinéraires </a></li></td>
            </tr>
        </tbody>

    </table>
</div>


{% endblock content %}
